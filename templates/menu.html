<ion-view view-title="Productos" ng-init="start()">

    <ion-content  overflow-scroll="true" style="background-color: #F1F1F1">
        <ion-refresher
            pulling-text="Pull to refresh..."
            on-refresh="start()">
        </ion-refresher>
        <div style="width:100%;height:70px;background-color: white">
            <div  style="float:right;" >
                <button class="button button-positive" ng-click="newPlate();" style="margin:auto">Nuevo Registro</button>
                <button class="button button-positive" ng-click="goToCat();" style="margin:auto">Mis Categorias</button>
            </div>
        </div>
        <br />
        <br />
 
        <div style="width:100%">
            <div class="card" style="width: 98%;margin-left: 1%;box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);" >
                <div id="loadingMenu">
                    <img style="width: 25%;margin-left: 37.5%" src="images/output_SaWDgJ.gif">
                    <p style="width: 100%;text-align: center;font-weight: bold">Cargando</p>
                </div>
                <div id="contentMenu" style="display: none">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            Productos
                        </div>
                        <div class="panel-body" style="overflow-x: scroll;scrollbar-x-position: top;">
                            <div class="dataTable_wrapper">
                                <table style="font-size: 15px;" datatable="ng" class="table table-striped table-bordered table-hover" id="mainMenu">
                                    <thead>
                                        <tr>
                                            <th>Imagen del Producto</th>
                                            <th style="display:none;">ID</th>
                                            <th style="display:none;">IDCategory</th>
                                            <th>Categoría</th>
                                            <th style="display: none">TipoMenu</th>
                                            <th>Nombre</th>
                                            <th>Descripción</th>
                                            <th>Precio Descriptivo</th>
                                            <th>Precio En Numeros</th>
                                            <th>Inventario</th>
                                            <th ng-if="addon_puntos == 1" >Puntos</th>
                                            <!-- <th>Conversion</th> -->
                                            <th>Estado</th>
                                            <th style="display: none">Estado</th>
                                            <th>Editar Producto</th>
                                            <th>Agregar Imagen</th>
                                            <th>Editar Opcione</th>
                                            <th>Link</th>
                                            <th>Eliminar</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat="m in menu" class="odd gradeX">
                                            <td id="tblmenuImg{{m.menu_id}}">
                                                <div class="container">
                                                    <img id="img{{m.menu_id}}" style="width:150px" src="img/{{m.img}}" alt="" class="image" />
                                                    <div class="overlay">
                                                        <div ng-click="deleteImg('{{m.menu_id}}')" class="text">Eliminar Imagen</div>
                                                    </div>
                                                </div>
                                            </td>
                                            <td id="tblmenuMenuId{{m.menu_id}}" style="display:none;">{{m.menu_id}}</td>
                                            <td id="tblmenuCategoryID{{m.menu_id}}" style="display:none;">{{m.category_id}}</td>
                                            <td id="tblmenuCategory{{m.menu_id}}">{{m.Category}}</td>
                                            <td style="display: none" id="tblmenuType{{m.menu_id}}">{{m.tipo_menu}}</td>
                                            <td id="tblmenuName{{m.menu_id}}">{{m.name}}</td>
                                            <td id="tblmenuDesc{{m.menu_id}}">{{m.description}}</td>
                                            <td id="tblmenuPrice{{m.menu_id}}">{{m.price}}</td>
                                            <td id="tblmenuPriceBase{{m.menu_id}}">{{m.menu_price}}</td>
                                            <td id="tblstock{{m.menu_id}}">{{m.menu_stock}}</td>
                                            <td ng-if="addon_puntos == 1" id="tblmenuPoints{{m.menu_id}}">{{m.menu_points}}</td>
                                            <!-- <td id="tblmenuConversion{{m.menu_id}}">{{m.conversion}}</td> -->
                                            <td id="stat{{m.menu_id}}" ng-if="m.status == 1"><span>Active</span></td>
                                            <td id="stat{{m.menu_id}}" ng-if="m.status == 0"><span>Inactive</span></td>
                                            <td style="display: none" id="tblmenuStatus{{m.menu_id}}">{{m.status}}</td>
                                            <td><button ng-click="edit('{{m.menu_id}}')" class="button button-positive"><i class="ion-edit"></i></button></td>
                                            <td><button class="button button-positive" ng-click="gotoImages('{{m.menu_id}}')"><i class="ion-android-image"></i></button></td>
                                            <td><button class="button button-positive" ng-click="goToOptions('{{m.menu_id}}')"><i class="ion-ios-color-wand"></i></button></td>
                                            <td><button class="button button-positive" ng-click="openUrlDialog('{{basePath}}{{nameApp}}/?store_id={{m.place_id}}&cat_id={{m.category_id}}&menu_id={{m.menu_id}}')"> <i class="ion-link"></i></button></td>
                                            <td><button ng-click="deleteMenu({{m.menu_id}})" class="button button-assertive"><i class="ion-close"></i></button></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>  
                </div>
            </div>
        </div>
        <style>
            .container {
                position: relative;
                width: 100%;
            }

            .image {
                display: block;
                width: 100%;
                height: auto;
            }

            .overlay {
                position: absolute;
                bottom: 0;
                left: 100%;
                right: 0;
                background-color: #f44242;
                overflow: hidden;
                width: 0;
                height: 100%;
                transition: .5s ease;
            }

            .container:hover .overlay {
                width: 100%;
                left: 0;
            }

            .text {
                white-space: nowrap; 
                color: white;
                font-size: 20px;
                position: absolute;
                overflow: hidden;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                -ms-transform: translate(-50%, -50%);
            }
        </style>
    </ion-content>
</ion-view>